load("~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Cleaned_data/Geocoded.RData")
aux1 <- data.table(unique(cbind("LUGAR ACCIDENTE" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº != 0]$`LUGAR ACCIDENTE`,
"Nº" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº != 0]$Nº)))
aux2 <- data.table(unique(cbind("LUGAR ACCIDENTE" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº == 0]$`LUGAR ACCIDENTE`,
"Nº" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº == 0]$Nº)))
aux <- rbind(aux1, aux2)
dirGeolocalizadas <- cbind(aux, "lat" = Geocoded$lat, "lon" = Geocoded$lon)
unique(Geocoded)
View(Geocoded)
unique(aux)
View(Accidentalidad)
View(aux1)
View(aux2)
View(aux)
unique(aux$`LUGAR ACCIDENTE`)
View(Geocoded)
unique(Geocoded$Direcciones)
prueba = unique(Geocoded$Direcciones)
prueba <- Geocoded[unique(Direcciones)]
prueba <- Geocoded[!duplicated(Direcciones)]
View(prueba)
Geocoded <- Geocoded[!duplicated(Direcciones)]
aux1 <- data.table(unique(cbind("LUGAR ACCIDENTE" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº != 0]$`LUGAR ACCIDENTE`,
"Nº" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº != 0]$Nº)))
aux2 <- data.table(unique(cbind("LUGAR ACCIDENTE" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº == 0]$`LUGAR ACCIDENTE`,
"Nº" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº == 0]$Nº)))
aux <- rbind(aux1, aux2)
dirGeolocalizadas <- cbind(aux, "lat" = Geocoded$lat, "lon" = Geocoded$lon)
GeoAccidentalidad <- join(Accidentalidad, dirGeolocalizadas)
save(Geocoded, file = "../Accidentes de tráfico - Madrid/Cleaned_data/Geocoded.RData")
Accidentalidad$FECHA == GeoAccidentalidad$FECHA
View(GeoAccidentalidad)
View(Accidentalidad)
Accidentalidad[, .N, by = list(`DIA SEMANA`)]
GeoAccidentalidad[, .N, by = list(`DIA SEMANA`)]
save(GeoAccidentalidad, file = "../Accidentes de tráfico - Madrid/Cleaned_data/GeoAccidentalidad.RData")
View(GeoAccidentalidad)
load("~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Cleaned_data/Geocoded.RData")
View(Geocoded)
Geocoded[20045,2] = 40.434103
View(Geocoded)
Geocoded[20045,3] = -3.733643
x,y = 1,2
Geocoded[18259,2] = 40.398707
Geocoded[18259,3] = -3.543040
Geocoded[30819,2] = 40.489579
Geocoded[30819,3] = -3.611237
Geocoded[39193,2] = 40.472548
Geocoded[29193,2] = 40.472548
Geocoded[29193,3] = -3.636027
View(Geocoded)
Geocoded[1483,2] = 40.458707
Geocoded[1483,3] = -3.595907
Geocoded[9001,2] = 40.430815
Geocoded[9001,3] = -3.696235
Geocoded[30918,2] = 40.457086
Geocoded[30918,3] = -3.699721
Geocoded[28212,2] = 40.489458
Geocoded[28212,3] = -3.692229
Geocoded[19693,2] = 40.460832
Geocoded[19693,3] = -3.615786
View(prueba)
save(Geocoded, file = "../Accidentes de tráfico - Madrid/Cleaned_data/Geocoded.RData")
aux1 <- data.table(unique(cbind("LUGAR ACCIDENTE" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº != 0]$`LUGAR ACCIDENTE`,
"Nº" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº != 0]$Nº)))
aux2 <- data.table(unique(cbind("LUGAR ACCIDENTE" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº == 0]$`LUGAR ACCIDENTE`,
"Nº" = Accidentalidad[!grepl("AUTOVIA", `LUGAR ACCIDENTE`) & Nº == 0]$Nº)))
aux <- rbind(aux1, aux2)
dirGeolocalizadas <- cbind(aux, "lat" = Geocoded$lat, "lon" = Geocoded$lon)
GeoAccidentalidad <- join(Accidentalidad, dirGeolocalizadas)
save(GeoAccidentalidad, file = "../Accidentes de tráfico - Madrid/Cleaned_data/GeoAccidentalidad.RData")
View(GeoAccidentalidad)
Accidentalidad[, .N, by = list(`DIA SEMANA`)]
GeoAccidentalidad[, .N, by = list(`DIA SEMANA`)]
hist(GeoAccidentalidad[, .N, by = list(`DIA SEMANA`)])
hist(GeoAccidentalidad[, .N, by = list(`DIA SEMANA`)]$`DIA SEMANA`)
hist(GeoAccidentalidad[, .N, by = list(`DIA SEMANA`)]$N)
View(GeoAccidentalidad)
library(ggplot2)
df <- GeoAccidentalidad[, .N, by = list(`DIA SEMANA`)]
View(df)
ggplot(df, aes(x = `DIA SEMANA`)) + geom_histogram()
ggplot(df, aes(x = `DIA SEMANA`)) + geom_histogram(stat = "count")
ggplot(df, aes(x = `DIA SEMANA`)) + geom_histogram(stat = "count", aes(y = N))
ggplot(GeoAccidentalidad, aes(x = `DIA SEMANA`)) + geom_histogram()
ggplot(GeoAccidentalidad, aes(x = lat)) + geom_histogram()
ggplot(df, aes(x = `DIA SEMANA`, y = N)) + geom_histogram()
ggplot(df, aes(x = `DIA SEMANA`, y = N)) + geom_histogram(stat = "identity")
ggplot(df, aes(x = `DIA SEMANA`)) + geom_histogram(stat = "identity")
ggplot(df, aes(x = `DIA SEMANA`, y = N)) + geom_histogram(stat = "identity")
ggplot(GeoAccidentalidad, aes(x = `DIA SEMANA`)) + geom_histogram()
ggplot(GeoAccidentalidad, aes(x = `DIA SEMANA`)) + geom_histogram(stat = "count")
ggplot(GeoAccidentalidad, aes(x = `DIA SEMANA`)) + geom_histogram(stat = "count") + scale_x_discrete(limits=c("LUNES","MARTES","MIERCOLES","JUEVES","VIERNES", "SABADO", "DOMINGO"))
ggplot(GeoAccidentalidad, aes(x = `DIA SEMANA`)) + geom_histogram(stat = "count", fill = "white") + scale_x_discrete(limits=c("LUNES","MARTES","MIERCOLES","JUEVES","VIERNES", "SABADO", "DOMINGO"))
ggplot(GeoAccidentalidad, aes(x = `DIA SEMANA`)) + geom_histogram(stat = "count", color = "black" , fill = "white") + scale_x_discrete(limits=c("LUNES","MARTES","MIERCOLES","JUEVES","VIERNES", "SABADO", "DOMINGO"))
ggplot(GeoAccidentalidad, aes(x = `DIA SEMANA`)) + geom_histogram(stat = "count", color = "black" , fill = "blue") + scale_x_discrete(limits=c("LUNES","MARTES","MIERCOLES","JUEVES","VIERNES", "SABADO", "DOMINGO"))
ggplot(GeoAccidentalidad, aes(x = `DIA SEMANA`)) + geom_histogram(stat = "count", color = "black" , fill = "orange") + scale_x_discrete(limits=c("LUNES","MARTES","MIERCOLES","JUEVES","VIERNES", "SABADO", "DOMINGO"))
library(knitr)
knit('estudio_temporal.Rmd')
knit('../TFM/Resultados parciales/estudio_temporal.Rmd')
knit('/TFM/Resultados parciales/estudio_temporal.Rmd')
knit('../TFM/Resultados parciales/estudio_temporal.Rmd')
getwd()
knit('/home/rodrigo/Universidad/Máster en IA Avanzada/TFM/Resultados parciales/estudio_temporal.Rmd')
GeoAccidentalidad <- GeoAccidentalidad[, FECHA := dmy(FECHA)]
library(lubridate)
GeoAccidentalidad <- GeoAccidentalidad[, FECHA := dmy(FECHA)]
GeoAccidentalidad[,.N, by = list(year(FECHA))]
knitr::opts_chunk$set(echo = TRUE)
ggplot(car_crash, aes(x = year(FECHA))) + geom_histogram(stat = "count", color = "black" , fill = "red")  + labs(title = "Frecuencia de accidentes por año\n", x = "Mes", y = "Número de accidentes")
library(data.table)
directorio = "../Accidentes de tráfico - Madrid/Raw_data"
año = "2018.csv"
dt1 = fread(paste(directorio, paste0("01-", año), sep = "/"))
View(dt1)
dt1 <- dt1[!grepl("M-30", tipo_elem)]
View(dt1)
prueba <- dt1[1:1000]
View(prueba)
prueba <- dt1[1:10000]
View(prueba)
prueba <- dt1[1:12000]
View(prueba)
prueba <- dt1[1:13000]
prueba <- dt1[1:10000]
prueba[, c("FECHA", "RANGO HORARIO") := tstrsplit(fecha, " ", fixed=TRUE)]
View(prueba)
dt1[, c("FECHA", "RANGO HORARIO") := tstrsplit(fecha, " ", fixed=TRUE)]
dt1[, fecha:=NULL]
dt1[, c(1,9,10,2,3,4,5,6,7,8)]
View(dt1)
View(dt1)
prueba <- prueba[, c(1,9,10,2,3,4,5,6,7,8)]
View(prueba)
dt1 <- dt1[, c(1,9,10,2,3,4,5,6,7,8)]
View(dt1)
prueba[, fecha:=NULL]
View(prueba)
prueba <- dt1[1:10000]
View(prueba)
prueba[order(id), mean(intensidad), by= (seq(nrow(prueba)) - 1) %/% 4]
media = prueba[order(id), mean(intensidad), by= (seq(nrow(prueba)) - 1) %/% 4]
View(media)
media = prueba[order(id), mean(intensidad), mean(vmed), by= (seq(nrow(prueba)) - 1) %/% 4]
media = prueba[order(id), int_med = mean(intensidad), v_med = mean(vmed), by= (seq(nrow(prueba)) - 1) %/% 4]
media = prueba[order(id), c("int_med","v_med") = list(mean(intensidad), v_med = mean(vmed)), by= (seq(nrow(prueba)) - 1) %/% 4]
media = prueba[order(id), c("int_med","v_med") = list(mean(intensidad), mean(vmed)), by= (seq(nrow(prueba)) - 1) %/% 4]
media = prueba[order(id), c("int_med","v_med") ;= list(mean(intensidad), mean(vmed)), by= (seq(nrow(prueba)) - 1) %/% 4]
media = prueba[order(id), c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= (seq(nrow(prueba)) - 1) %/% 4]
View(media)
View(prueba)
library(lubridate)
prueba[`RANGO HORARIO`:= hms(`RANGO HORARIO`)]
prueba[`RANGO HORARIO`= hms(`RANGO HORARIO`)]
prueba[,`RANGO HORARIO`:= hms(`RANGO HORARIO`)]
View(prueba)
hour(prueba$`RANGO HORARIO`[1])
hour(prueba$`RANGO HORARIO`[190])
View(media)
View(prueba)
prueba <- dt1[1:10000]
prueba[,`RANGO HORARIO`:= hms(as.character(`RANGO HORARIO`))]
View(prueba)
View(dt1)
prueba <- dt1[1:10000]
prueba$`RANGO HORARIO`[1]
class(prueba$`RANGO HORARIO`[1])
hms(prueba$`RANGO HORARIO`[1])
hms(prueba$`RANGO HORARIO`[1], quiet = FALSE)
hms(prueba$`RANGO HORARIO`[1], quiet = TRUE)
hms(prueba$`RANGO HORARIO`[10000], quiet = TRUE)
hms(dt1$`RANGO HORARIO`[10000], quiet = TRUE)
hms(dt1$`RANGO HORARIO`[100000], quiet = TRUE)
View(prueba)
prueba[,by = list(id, FECHA, hour(`RANGO HORARIO`))]
hour(prueba$`RANGO HORARIO`[1])
hour(hms(prueba$`RANGO HORARIO`[1]))
prueba[,`RANGO HORARIO`:= hms(`RANGO HORARIO`)]
media = prueba[,by = list(id, FECHA, hour(`RANGO HORARIO`))]
media = prueba[,.N,by = list(id, FECHA, hour(`RANGO HORARIO`))]
View(media)
prueba[order(id), c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= (seq(nrow(prueba)) - 1) %/% 4]
View(prueba)
media = prueba[,.N,by = list(id, FECHA, hour(`RANGO HORARIO`), int_med, v_med)]
View(media)
hour(prueba$`RANGO HORARIO`[1])
hour(prueba$`RANGO HORARIO`[2])
hour(prueba$`RANGO HORARIO`[3])
hour(prueba$`RANGO HORARIO`[53])
hour(prueba$`RANGO HORARIO`[3032])
View(prueba)
prueba[order(id)]
x = prueba[order(id)]
View(x)
prueba[order(id), c("int_med","v_med") = list(mean(intensidad), mean(vmed)), by= (seq(nrow(prueba)) - 1) %/% 4]
media = prueba[order(id), c("int_med","v_med") = list(mean(intensidad), mean(vmed)), by= (seq(nrow(prueba)) - 1) %/% 4]
media <- prueba[order(id), c("int_med","v_med") = list(mean(intensidad), mean(vmed)), by= (seq(nrow(prueba)) - 1) %/% 4]
media <- prueba[order(id), c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= (seq(nrow(prueba)) - 1) %/% 4]
prueba[, .N, by = list(id)]
prueba[, .N, by = list(id, hour(`RANGO HORARIO`))]
dim(dt)
dim(dt1)
dim(dt1)[1]
dim(dt1)[1]/4
x = dt1[order(id)]
View(x)
x[order(id), c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= (seq(nrow(prueba)) - 1) %/% 4]
x[order(id), c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= (seq(nrow(x)) - 1) %/% 4]
View(x)
x[, `RANGO HORARIO` := hms(`RANGO HORARIO`)]
x <- x[, .N, by = list(id, FECHA, hour(`RANGO HORARIO`), int_med, v_med)]
View(x)
View(x)
View(prueba)
media <- prueba[order(id), c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by = list(FECHA, hour(`RANGO HORARIO`))]
View(prueba)
media <- prueba[order(id), .N, by = list(FECHA, hour(`RANGO HORARIO`))]
View(media)
media <- prueba[order(id), c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by = list(id, FECHA, hour(`RANGO HORARIO`))]
View(media)
dt1[, `RANGO HORARIO` := hms(`RANGO HORARIO`)]
dt1[order(id), c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= list(id, FECHA, hour(`RANGO HORARIO`))]
x <- dt1[, .N, by = list(id, FECHA, hour(`RANGO HORARIO`), int_med, v_med)]
View(x)
dt1 <- dt1[, .N, by = list(id, FECHA, hour(`RANGO HORARIO`), int_med, v_med)]
1 <- prueba
"1" <- prueba
dt1[order(id), c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= list(id, FECHA, hour(`RANGO HORARIO`))]
"01-2018" <- dt1
save("01-2018", file = "../Accidentes de tráfico - Madrid/Cleaned_data/01-2018.RData")
load("~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Cleaned_data/01-2018.RData")
View(`01-2018`)
directorio = "../Accidentes de tráfico - Madrid/Raw_data"
año = "2018.csv"
dt1 = fread(paste(directorio, paste0("01-", año), sep = "/"))
library(data.table); library(lubridate)
dt1 = fread(paste(directorio, paste0("01-", año), sep = "/"))
dt1 <- dt1[!grepl("M-30", tipo_elem)]
dt1[, c("FECHA", "RANGO HORARIO") := tstrsplit(fecha, " ", fixed=TRUE)]
dt1[, fecha:=NULL]
dt1 <- dt1[, c(1,9,10,2,3,4,5,6,7,8)]
View(dt1)
dt1[, `RANGO HORARIO` := hms(`RANGO HORARIO`)]
View(dt1)
dt1[, c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= list(id, FECHA, hour(`RANGO HORARIO`))]
dt1[, c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= list(id, FECHA, hour(`RANGO HORARIO`))]
substr(x, start = 1, stop = 2)
substr(dt1$`RANGO HORARIO`[1], start = 1, stop = 2)
substr("00:00:00", start = 1, stop = 2)
substr("01:00:00", start = 1, stop = 2)
1+1
object.size(1)
object.size("A")
load("~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Cleaned_data/01-2018.RData")
object.size(`01-2018`)
gc()
rm(list = ls())
object.size(`01-2018`)
library(data.table); library(lubridate)
directorio = "../Accidentes de tráfico - Madrid/Raw_data"
año = "2018.csv"
dt1 = fread(paste(directorio, paste0("01-", año), sep = "/"))
object.size(dt1)
[!grepl("M-30", tipo_elem)]
dt1 <- dt1[!grepl("M-30", tipo_elem)]
object.size(dt1)
dt1[, c("FECHA", "RANGO HORARIO") := tstrsplit(fecha, " ", fixed=TRUE)]
dt1[, fecha:=NULL]
dt1 <- dt1[, c(1,9,10,2,3,4,5,6,7,8)]
object.size(dt1)
dt1[, `RANGO HORARIO` := hms(`RANGO HORARIO`)]
object.size(dt1)
dt1[, `RANGO HORARIO` := hour(`RANGO HORARIO`)]
object.size(dt1)
View(dt1)
dt1[, c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= list(id, FECHA, `RANGO HORARIO`)]
View(dt1)
object.size(dt1)
dt1 <- dt1[, .N, by = list(id, FECHA, hour(`RANGO HORARIO`), int_med, v_med)]
dt1 <- dt1[, .N, by = list(id, FECHA, `RANGO HORARIO`, int_med, v_med)]
object.size(dt1)
View(dt1)
"01-2018" <- dt1
save("01-2018", file = "../Accidentes de tráfico - Madrid/Cleaned_data/01-2018.RData")
rm(list = ls())
directorio = "../Accidentes de tráfico - Madrid/Raw_data"
fecha = "02-2018.csv"
dt = fread(paste(directorio, fecha, sep = "/"))
# dt2 = fread(paste(directorio, paste0("02-", año), sep = "/"))
# dt3 = fread(paste(directorio, paste0("03-", año), sep = "/"))
# dt4 = fread(paste(directorio, paste0("04-", año), sep = "/"))
# dt5 = fread(paste(directorio, paste0("05-", año), sep = "/"))
# dt6 = fread(paste(directorio, paste0("06-", año), sep = "/"))
# dt7 = fread(paste(directorio, paste0("07-", año), sep = "/"))
# dt8 = fread(paste(directorio, paste0("08-", año), sep = "/"))
# dt9 = fread(paste(directorio, paste0("09-", año), sep = "/"))
# dt10 = fread(paste(directorio, paste0("10-", año), sep = "/"))
# dt11 = fread(paste(directorio, paste0("11-", año), sep = "/"))
# dt12 = fread(paste(directorio, paste0("12-", año), sep = "/"))
dt <- dt[!grepl("M-30", tipo_elem)]
dt[, c("FECHA", "RANGO HORARIO") := tstrsplit(fecha, " ", fixed=TRUE)]
dt[, fecha:=NULL]
dt <- dt[, c(1,9,10,2,3,4,5,6,7,8)]
dt[, `RANGO HORARIO` := hms(`RANGO HORARIO`)]
dt[, `RANGO HORARIO` := hour(`RANGO HORARIO`)]
dt[, c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= list(id, FECHA, `RANGO HORARIO`)]
dt <- dt[, .N, by = list(id, FECHA, `RANGO HORARIO`, int_med, v_med)]
dt[, N := NULL]
"02-2018" <- dt1
save("02-2018", file = "../Accidentes de tráfico - Madrid/Cleaned_data/02-2018.RData")
View(dt)
dt = fread(paste(directorio, fecha, sep = "/"))
# dt2 = fread(paste(directorio, paste0("02-", año), sep = "/"))
# dt3 = fread(paste(directorio, paste0("03-", año), sep = "/"))
# dt4 = fread(paste(directorio, paste0("04-", año), sep = "/"))
# dt5 = fread(paste(directorio, paste0("05-", año), sep = "/"))
# dt6 = fread(paste(directorio, paste0("06-", año), sep = "/"))
# dt7 = fread(paste(directorio, paste0("07-", año), sep = "/"))
# dt8 = fread(paste(directorio, paste0("08-", año), sep = "/"))
# dt9 = fread(paste(directorio, paste0("09-", año), sep = "/"))
# dt10 = fread(paste(directorio, paste0("10-", año), sep = "/"))
# dt11 = fread(paste(directorio, paste0("11-", año), sep = "/"))
# dt12 = fread(paste(directorio, paste0("12-", año), sep = "/"))
dt <- dt[!grepl("M-30", tipo_elem) || !grepl("M30", tipo_elem)]
dt[, c("FECHA", "RANGO HORARIO") := tstrsplit(fecha, " ", fixed=TRUE)]
dt[, fecha:=NULL]
dt <- dt[, c(1,9,10,2,3,4,5,6,7,8)]
dt[, `RANGO HORARIO` := hms(`RANGO HORARIO`)]
dt[, `RANGO HORARIO` := hour(`RANGO HORARIO`)]
dt[, c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= list(id, FECHA, `RANGO HORARIO`)]
dt <- dt[, .N, by = list(id, FECHA, `RANGO HORARIO`, int_med, v_med)]
dt[, N := NULL]
"02-2018" <- dt
save("02-2018", file = "../Accidentes de tráfico - Madrid/Cleaned_data/02-2018.RData")
View(dt)
View(`02-2018`)
dt = fread(paste(directorio, fecha, sep = "/"))
View(dt)
dt <- dt[!grepl("M-30", tipo_elem) || !grepl("M30", tipo_elem)]
dt <- dt[!grepl("M-30", tipo_elem) | !grepl("M30", tipo_elem)]
View(dt)
dt <- dt[!grepl("M-30", tipo_elem) & !grepl("M30", tipo_elem)]
View(dt)
dt[, c("FECHA", "RANGO HORARIO") := tstrsplit(fecha, " ", fixed=TRUE)]
dt[, fecha:=NULL]
dt <- dt[, c(1,9,10,2,3,4,5,6,7,8)]
dt[, `RANGO HORARIO` := hms(`RANGO HORARIO`)]
dt[, `RANGO HORARIO` := hour(`RANGO HORARIO`)]
dt[, c("int_med","v_med") := list(mean(intensidad), mean(vmed)), by= list(id, FECHA, `RANGO HORARIO`)]
dt <- dt[, .N, by = list(id, FECHA, `RANGO HORARIO`, int_med, v_med)]
dt[, N := NULL]
"02-2018" <- dt
save("02-2018", file = "../Accidentes de tráfico - Madrid/Cleaned_data/02-2018.RData")
View(`02-2018`)
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
View(`03-2018`)
rm(list = ls())
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
rm(list = ls())
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
rm(list = ls())
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
object.size(dt$`RANGO HORARIO`[1])
object.size("DE 23:00 A 23:59")
rm(list = ls())
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
View(`10-2018`)
rm(list = ls())
año = "2018-RData"
directorio = "../Accidentes de tráfico - Madrid/Raw_data"
año = "2018-RData"
dt1 = fread(paste(directorio, paste0("02-", año), sep = "/"))
directorio = "../Accidentes de tráfico - Madrid/Raw_data"
año = "2018-RData"
dt1 = load(paste(directorio, paste0("02-", año), sep = "/"))
directorio = "../Accidentes de tráfico - Madrid/Raw_data"
año = "2018.RData"
dt1 = load(paste(directorio, paste0("02-", año), sep = "/"))
directorio = "../Accidentes de tráfico - Madrid/Raw_data"
año = "2018.RData"
load(paste(directorio, paste0("01-", año), sep = "/"))
load(paste(directorio, paste0("02-", año), sep = "/"))
load(paste(directorio, paste0("03-", año), sep = "/"))
load(paste(directorio, paste0("04-", año), sep = "/"))
load(paste(directorio, paste0("05-", año), sep = "/"))
load(paste(directorio, paste0("06-", año), sep = "/"))
load(paste(directorio, paste0("07-", año), sep = "/"))
load(paste(directorio, paste0("08-", año), sep = "/"))
load(paste(directorio, paste0("09-", año), sep = "/"))
load(paste(directorio, paste0("10-", año), sep = "/"))
load(paste(directorio, paste0("11-", año), sep = "/"))
load(paste(directorio, paste0("12-", año), sep = "/"))
2018_trafico <- rbind(01-2018, 02-2018)
"2018_trafico" <- rbind("01-2018", "02-2018")
save("2018_trafico", file = "../Accidentes de tráfico - Madrid/Raw_data/2018_trafico.RData")
"2018_trafico" <- cbind("01-2018", "02-2018")
"2018_trafico" <- rbind(`01-2018`, `02-2018`)
View(`01-2018`)
`01-2018`[, N := NULL]
View(`01-2018`)
save("01-2018", file = "../Accidentes de tráfico - Madrid/Raw_data/01-2018.RData")
load(paste(directorio, paste0("01-", año), sep = "/"))
"2018_trafico" <- rbind(`01-2018`, `02-2018`)
View(`2018_trafico`)
"2018_trafico" <- rbind(`01-2018`, `02-2018`, `03-2018`, `04-2018`, `05-2018`, `06-2018`,
`07-2018`, `08-2018`, `09-2018`, `10-2018`, `11-2018`, `12-2018`)
save("2018_trafico", file = "../Accidentes de tráfico - Madrid/Raw_data/2018_trafico.RData")
rm(list = ls())
load("~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Raw_data/2018_trafico.RData")
View(`2018_trafico`)
object.size(`2018_trafico`)
rm(list = ls())
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
rm(list = ls())
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
rm(list = ls())
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
rm(list = ls())
1+1
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
View(`10-2017`)
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
directorio = "../Accidentes de tráfico - Madrid/Raw_data"
año = "2017.RData"
load(paste(directorio, paste0("01-", año), sep = "/"))
load(paste(directorio, paste0("02-", año), sep = "/"))
load(paste(directorio, paste0("03-", año), sep = "/"))
load(paste(directorio, paste0("04-", año), sep = "/"))
load(paste(directorio, paste0("05-", año), sep = "/"))
load(paste(directorio, paste0("06-", año), sep = "/"))
load(paste(directorio, paste0("07-", año), sep = "/"))
load(paste(directorio, paste0("08-", año), sep = "/"))
load(paste(directorio, paste0("09-", año), sep = "/"))
load(paste(directorio, paste0("10-", año), sep = "/"))
load(paste(directorio, paste0("11-", año), sep = "/"))
load(paste(directorio, paste0("12-", año), sep = "/"))
"2017_trafico" <- rbind(`01-2017`, `02-2017`, `03-2017`, `04-2017`, `05-2017`, `06-2017`,
`07-2017`, `08-2017`, `09-2017`, `10-2017`, `11-2017`, `12-2017`)
save("2017_trafico", file = "../Accidentes de tráfico - Madrid/Raw_data/2017_trafico.RData")
rm(list = ls())
directorio = "../Accidentes de tráfico - Madrid/Raw_data"
fecha = "01-2016.csv"
dt = fread(paste(directorio, fecha, sep = "/"))
View(dt)
dt <- dt[!grepl("M-30", tipo_elem) & !grepl("M30", tipo_elem)]
dt[, identif := NULL]
colnames(dt)[1] <- "id"
# 2_ Como vamos a querer unirlo al dataset principal, y por comodidad, se separa la fecha y hora y se ordena
#    también por comodidad.
dt[, c("FECHA", "RANGO HORARIO") := tstrsplit(fecha, " ", fixed=TRUE)]
dt[, fecha:=NULL]
dt <- dt[, c(1,9,10,2,3,4,5,6,7,8)]
# 4_ Para simplificar el proceso, se utilizan solo las horas de cada medición, pues los accidentes también van de
#    hora en hora (sin minutos).
#    Otra opción: substr("01:00:00", start = 1, stop = 2)
dt[, `RANGO HORARIO` := hms(`RANGO HORARIO`)]
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
rm(list = ls())
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
rm(list = ls())
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
rm(list = ls())
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
rm(list = ls())
directorio = "../Accidentes de tráfico - Madrid/Raw_data"
año = "2016.RData"
load(paste(directorio, paste0("01-", año), sep = "/"))
load(paste(directorio, paste0("02-", año), sep = "/"))
load(paste(directorio, paste0("03-", año), sep = "/"))
load(paste(directorio, paste0("04-", año), sep = "/"))
load(paste(directorio, paste0("05-", año), sep = "/"))
load(paste(directorio, paste0("06-", año), sep = "/"))
load(paste(directorio, paste0("07-", año), sep = "/"))
load(paste(directorio, paste0("08-", año), sep = "/"))
load(paste(directorio, paste0("09-", año), sep = "/"))
load(paste(directorio, paste0("10-", año), sep = "/"))
load(paste(directorio, paste0("11-", año), sep = "/"))
load(paste(directorio, paste0("12-", año), sep = "/"))
"2016_trafico" <- rbind(`01-2016`, `02-2016`, `03-2016`, `04-2016`, `05-2016`, `06-2016`,
`07-2016`, `08-2016`, `09-2016`, `10-2016`, `11-2016`, `12-2016`)
save("2016_trafico", file = "../Accidentes de tráfico - Madrid/Raw_data/2016_trafico.RData")
rm(list = ls())
load("~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Raw_data/01-120.RData")
p <- `01-2016`
save(p, file = "../Accidentes de tráfico - Madrid/Raw_data/p.RData")
rm(list = ls())
source('~/Universidad/Máster en IA Avanzada/TFM/Accidentes de tráfico - Madrid/Scripts/Fase 2/datos_flujo_velocidad.R')
View(dt)
rm(list = ls())
